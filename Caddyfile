
dev.simoncome.com {
    # 1. 指向 Vue 项目 build 后的 dist 文件夹（必须是绝对路径）
    root * /root/caddy/webdist/devsimon/dist

    # 2. 启用静态文件服务（处理 HTML/CSS/JS/图片等，自动识别 index.html）
    file_server

    # 3. 解决 Vue history 路由 404 核心配置
    # 原理：所有「非文件请求」（如 /about /product）都转发到 index.html，让 Vue Router 接管
    handle {
        @notFile not file  # 匹配「不是真实文件」的请求（排除图片/CSS等静态资源）
        try_files {path} /index.html  # 把请求重定向到 index.html
    }

    # 4. 静态资源缓存优化（图片/JS/CSS 缓存 7 天，减少重复加载）
    @vueAssets {
        file  # 仅匹配真实文件
        path *.jpg *.jpeg *.png *.gif *.css *.js *.ico *.svg  # Vue 常见静态资源后缀
    }
    header @vueAssets Cache-Control "public, max-age=604800"  # 7 天 = 604800 秒

    # 5. 可选：跨域 API 代理（Vue 项目中请求 /api 开头的接口，转发到后端服务）
    # 例：Vue 中 axios.get("/api/user") → 实际请求 http://localhost:9000/api/user
    reverse_proxy /api/* localhost:9000  # 后端服务端口（替换成你的实际后端端口）
}